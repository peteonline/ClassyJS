if(!Object.create){Object.create=(function(){function a(){}return function(b){if(arguments.length!=1){throw new Error("Object.create implementation only accepts one parameter.")}a.prototype=b;return new a()}})()}String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(a,b){if(this===undefined||this===null){throw new TypeError('"this" is null or not defined')}var c=this.length>>>0;b=+b||0;if(Math.abs(b)===Infinity){b=0}if(b<0){b+=c;if(b<0){b=0}}for(;b<c;b++){if(this[b]===a){return b}}return -1}}(function(a){InvalidSyntaxFatal=function(b){this.message=b;this.stack=Error().stack};InvalidSyntaxFatal.prototype=Object.create(Error.prototype);InvalidSyntaxFatal.prototype.name="Fatal: InvalidSyntax"})();(function(a){AbstractClassFatal=function(b){this.message=b;this.stack=Error().stack};AbstractClassFatal.prototype=Object.create(Error.prototype);AbstractClassFatal.prototype.name="Fatal: AbstractClass"})();(function(a){AbstractMethodNotImplementedFatal=function(b){this.message=b;this.stack=Error().stack};AbstractMethodNotImplementedFatal.prototype=Object.create(Error.prototype);AbstractMethodNotImplementedFatal.prototype.name="Fatal: AbstractMethodNotImplemented"})();(function(a){InvalidClassDeclarationFatal=function(b){this.message=b;this.stack=Error().stack};InvalidClassDeclarationFatal.prototype=Object.create(Error.prototype);InvalidClassDeclarationFatal.prototype.name="Fatal: InvalidClassDeclaration"})();(function(a){RuntimeFatal=function(b){this.message=b;this.stack=Error().stack};RuntimeFatal.prototype=Object.create(Error.prototype);RuntimeFatal.prototype.name="Fatal: Runtime"})();(function(a){ScopeFatal=function(b){this.message=b;this.stack=Error().stack};ScopeFatal.prototype=Object.create(Error.prototype);ScopeFatal.prototype.name="Fatal: Scope"})();(function(a){UnknownPropertyFatal=function(b){this.message=b;this.stack=Error().stack};UnknownPropertyFatal.prototype=Object.create(Error.prototype);UnknownPropertyFatal.prototype.name="Fatal: UnknownProperty"})();(function(a){UnknownMethodFatal=function(b){this.message=b;this.stack=Error().stack};UnknownMethodFatal.prototype=Object.create(Error.prototype);UnknownMethodFatal.prototype.name="Fatal: UnknownMethod"})();(function(a){UnknownEventFatal=function(b){this.message=b;this.stack=Error().stack};UnknownEventFatal.prototype=Object.create(Error.prototype);UnknownEventFatal.prototype.name="Fatal: UnknownEvent"})();(function(a){CannotInstantiateInterfaceFatal=function(b){this.message=b;this.stack=Error().stack};CannotInstantiateInterfaceFatal.prototype=Object.create(Error.prototype);CannotInstantiateInterfaceFatal.prototype.name="Fatal: CannotInstantiateInterface"})();(function(a){InterfaceMethodNotImplementedFatal=function(b){this.message=b;this.stack=Error().stack};InterfaceMethodNotImplementedFatal.prototype=Object.create(Error.prototype);InterfaceMethodNotImplementedFatal.prototype.name="Fatal: InterfaceMethodNotImplemented"})();(function(a){InterfaceIncorrectlyDefinedFatal=function(b){this.message=b;this.stack=Error().stack};InterfaceIncorrectlyDefinedFatal.prototype=Object.create(Error.prototype);InterfaceIncorrectlyDefinedFatal.prototype.name="Fatal: InterfaceIncorrectlyDefined"})();(function(a){InvalidReturnTypeFatal=function(b){this.message=b;this.stack=Error().stack};InvalidReturnTypeFatal.prototype=Object.create(Error.prototype);InvalidReturnTypeFatal.prototype.name="Fatal: InvalidReturnType"})();(function(a){InvalidArgumentTypeFatal=function(b){this.message=b;this.stack=Error().stack};InvalidArgumentTypeFatal.prototype=Object.create(Error.prototype);InvalidArgumentTypeFatal.prototype.name="Fatal: InvalidArgumentType"})();(function(a){CloneFatal=function(b){this.message=b;this.stack=Error().stack};CloneFatal.prototype=Object.create(Error.prototype);CloneFatal.prototype.name="Fatal: Clone"})();(function(g){Class=function(){};var s=0;Class.define=function(E,C){if(typeof E!="string"||E==""){throw new InvalidClassDeclarationFatal("Class name is required")}if(typeof C!="undefined"&&typeof C!="object"){throw new InvalidClassDeclarationFatal("Class definition must be object or undefined")}C=C||{};var L=E.split(".");var ac=L.pop();var S=window;for(var aa in L){if(!L.hasOwnProperty(aa)){continue}S[L[aa]]=S[L[aa]]||{};S=S[L[aa]]}var T=[];for(var aa in S[ac]){if(S[ac].hasOwnProperty(aa)){T[aa]=S[ac][aa]}}S[ac]=function(){this.type=S[ac];if(S[ac].Implements){for(var ai in S[ac].Implements){if(!S[ac].Implements.hasOwnProperty(ai)){continue}var ah=S[ac].Implements[ai];for(var al in ah.methods){if(!ah.methods.hasOwnProperty(al)){continue}var aj=ah.methods[al];if(typeof this.type.methods[al]=="undefined"){throw new InterfaceMethodNotImplementedFatal("Class '"+E+"' must define interface method '"+al+"'")}if(this.type.methods[al].scope.level!=Class.Scope.PUBLIC){throw new InterfaceMethodNotImplementedFatal("Interface method '"+al+"' must be declared public")}if(aj.argTypes!==null&&!q(aj.argTypes,this.type.methods[al].argTypes)){throw new InvalidArgumentTypeFatal("Method '"+al+"' must match argument types of interface")}if(aj.returnType!==g&&aj.returnType!=this.type.methods[al].returnType){throw new InvalidReturnTypeFatal("Method '"+al+"' must match return type of interface")}}}}this.properties=S[ac].properties;this.propertyValues={};for(var ai in this.properties){if(!this.properties.hasOwnProperty(ai)){continue}this.properties[ai].parent=this;this.propertyValues[ai]=a(this.properties[ai].originalValue)}this.eventCallbacks={};for(var ai in this.type.Events){if(!this.type.Events.hasOwnProperty(ai)){continue}this.eventCallbacks[ai]=[]}if(this.type.Extends){this.parent=new this.type.Extends()}else{this.parent=new Class();this.parent.type=Class;this.parent.id=s++}this.parent.child=this;this.id=this.parent.id;var ak=m(this);for(var ai in ak){if(!ak.hasOwnProperty(ai)){continue}var af=ak[ai];if(typeof this[af]!="function"){this[af]=function(){var am=[arguments.callee.methodName];for(var an=0;an<arguments.length;an++){am.push(arguments[an])}return this.call.apply(this,am)};this[af].methodName=af}}if(arguments.callee.caller!=S[ac].toString()){if(S[ac].Abstract){throw new AbstractClassFatal("Abstract class cannot be instantiated")}if(d("construct",this)&&arguments.callee.caller!==a){var ag=["construct"];for(var ai=0;ai<arguments.length;ai++){ag.push(arguments[ai])}this.call.apply(this,ag)}}};S[ac].className=E;for(var aa in T){if(!T.hasOwnProperty(aa)){continue}S[ac][aa]=T[aa]}S[ac].prototype=Class.prototype;if(C.Require){if(Object.prototype.toString.apply(C.Require)!="[object Array]"){C.Require=[C.Require]}j(C.Require,Class.registerLoadedDependency);delete C.Require}if(C.Abstract){if(Object.prototype.toString.apply(C.Abstract)=="[object Array]"){for(var aa in C.Abstract){if(!C.Abstract.hasOwnProperty(aa)){continue}var z=C.Abstract[aa].split(" ");if(z[0]!="public"&&z[0]!="protected"){throw new InvalidSyntaxFatal("Abstract methods must be specified public or protected")}}S[ac].AbstractMethods=C.Abstract}S[ac].Abstract=true;delete C.Abstract}if(C.Extends){S[ac].Extends=C.Extends;delete C.Extends}if(C.Implements){if(Object.prototype.toString.apply(C.Implements)!="[object Array]"){C.Implements=[C.Implements]}for(var aa in C.Implements){if(typeof C.Implements[aa]=="string"){var w=C.Implements[aa].split(".");var J=window;for(var Z=0;Z<w.length;Z++){J=J[w[Z]]}C.Implements[aa]=J}}S[ac].Implements=C.Implements;delete C.Implements}if(C.Events){if(Object.prototype.toString.apply(C.Events)!="[object Array]"){throw new InvalidSyntaxFatal("Events must be declared in an array")}var Y={};for(var aa in C.Events){if(!C.Events.hasOwnProperty(aa)){continue}if(typeof C.Events[aa]!="string"){throw new InvalidSyntaxFatal("Events must be declared as an array of strings")}var z=C.Events[aa].split(":");if(z.length==2){var I=z[1].trim().split(" ")}z=z[0].trim().split(" ");var N=(z.length==2)?z.shift():g;Y[z[0]]={argTypes:I,returnType:N}}S[ac].Events=Y;delete C.Events}S[ac].properties={};S[ac].methods={};S[ac].staticProperties={};S[ac].staticMethods={};var R=new RegExp("(?:(public|private|protected) )?([A-Za-z0-9-_]* )?(getter|setter)(?: :((?: [A-Za-z0-9-_][A-Za-z0-9-_.]*)*))?");for(var aa in C){if(typeof C[aa]!="object"){continue}var ae={};for(var Z in C[aa]){if(!C[aa].hasOwnProperty(Z)){continue}var B=Z.match(R);if(!B){continue}var P=(B[3]=="getter")?2:4;var V=[B[P]?B[P].trim():g];if(typeof C[aa][Z]=="function"){V.push(C[aa][Z])}else{if(C[aa][Z]===true){V.push(function(af){return af})}else{if(C[aa][Z]===false){V.push(false)}}}if(typeof C[aa][Z]!="boolean"&&typeof C[aa][Z]!="function"&&typeof C[aa][Z]!="undefined"){throw new InvalidSyntaxFatal("Property getter should specify a function or boolean")}delete C[aa][Z];if(typeof ae[aa]=="undefined"){ae[aa]={}}if(typeof ae[aa]["getter"]=="undefined"){ae[aa]["getter"]={"public":[g,function(af){return af}],"private":g,"protected":g}}if(typeof ae[aa]["setter"]=="undefined"){ae[aa]["setter"]={"public":[g,function(af){return af}],"private":g,"protected":g}}ae[aa][B[3]][B[1]||"public"]=V}for(var Z in ae[aa]){if(!ae[aa].hasOwnProperty(Z)){continue}C[aa][Z]=ae[aa][Z]}}toInspectDefinition:for(var aa in C){if(!C.hasOwnProperty(aa)){continue}var Q;var O=false;var z=aa.split(":").shift().trim().split(" ");if(aa.split(":").length==2){var K=aa.split(":").pop().trim().split(" ")}var X=z.pop();if(z[0]=="static"){O=true;z.shift()}if(typeof C[aa]=="object"){for(var Z in C[aa]){if(!C[aa].hasOwnProperty(Z)){continue}if(Z!="getter"&&Z!="setter"&&Z!="value"){break}if(typeof C[aa].getter=="undefined"&&typeof C[aa].setter=="undefined"){break}if(aa.substring(0,8)=="private:"||aa.substring(0,10)=="protected:"||aa.substring(0,7)=="public:"){throw new InvalidSyntaxFatal("Cannot declare access level on properties")}if(Object.prototype.toString.apply(C[aa].getter)!="[object Array]"){C[aa].getter=[g,C[aa].getter,true,true]}else{if(C[aa].getter.length==1){C[aa].getter=[g,C[aa].getter[0],true,true]}else{if(C[aa].getter.length==2){var F=C[aa].getter[0];if(typeof F=="boolean"||typeof F=="function"){C[aa].getter=[g,C[aa].getter[0],C[aa].getter[1],C[aa].getter[1]]}else{C[aa].getter=[C[aa].getter[0],C[aa].getter[1],true,true]}}else{if(C[aa].getter.length==3){var F=C[aa].getter[0];if(typeof F=="boolean"||typeof F=="function"){C[aa].getter=[g,C[aa].getter[0],C[aa].getter[1],C[aa].getter[2]]}else{C[aa].getter=[C[aa].getter[0],C[aa].getter[1],C[aa].getter[2],C[aa].getter[2]]}}}}}if(Object.prototype.toString.apply(C[aa].setter)!="[object Array]"){C[aa].setter=[g,C[aa].setter,true,true]}else{if(C[aa].setter.length==1){C[aa].setter=[g,C[aa].setter[0],true,true]}else{if(C[aa].setter.length==2){var F=C[aa].setter[0];if(typeof F=="boolean"||typeof F=="function"){C[aa].setter=[g,C[aa].setter[0],C[aa].setter[1],C[aa].setter[1]]}else{C[aa].setter=[C[aa].setter[0],C[aa].setter[1],true,true]}}else{if(C[aa].setter.length==3){var F=C[aa].setter[0];if(typeof F=="boolean"||typeof F=="function"){C[aa].setter=[g,C[aa].setter[0],C[aa].setter[1],C[aa].setter[2]]}else{C[aa].setter=[C[aa].setter[0],C[aa].setter[1],C[aa].setter[2],C[aa].setter[2]]}}}}}Q=new Class.Scope(Class.Scope.PRIVATE);S[ac].properties[X]=new Class.Property(X,C[aa].value,Q,(typeof C[aa].getter[1]=="undefined"||C[aa].getter[1]===true)?function(af){return af}:C[aa].getter[1],(typeof C[aa].setter[1]=="undefined"||C[aa].setter[1]===true)?function(af){return af}:C[aa].setter[1],C[aa].getter[2],C[aa].getter[3],C[aa].setter[2],C[aa].setter[3],C[aa].getter[0],C[aa].setter[0]);Q.parent=S[ac].properties[X];S[ac].properties[X].originalValue=C[aa].value;continue toInspectDefinition}}if(z[0]=="private"){Q=new Class.Scope(Class.Scope.PRIVATE);z.shift()}else{if(z[0]=="protected"){Q=new Class.Scope(Class.Scope.PROTECTED);z.shift()}else{if(z[0]=="public"){Q=new Class.Scope(Class.Scope.PUBLIC);z.shift()}else{Q=new Class.Scope(Class.Scope.PRIVATE)}}}if(!O){if(typeof C[aa]=="function"){S[ac].methods[X]=new Class.Method(X,C[aa],Q,null,(z.length==0)?g:z[0],K);Q.parent=S[ac].methods[X];S[ac].methods[X].parentType=S[ac];S[ac].methods[X].method.parentType=S[ac]}else{S[ac].properties[X]=new Class.Property(X,C[aa],Q);Q.parent=S[ac].properties[X];S[ac].properties[X].originalValue=C[aa]}}else{if(typeof C[aa]=="function"){S[ac].staticMethods[X]=new Class.Method(X,C[aa],Q,true,(z.length==0)?g:z[0],K);var ad=S[ac].staticMethods[X];Q.parent=ad;ad.parentType=S[ac];ad.method.parentType=S[ac];S[ac][X]=function(){return b(S[ac],arguments.callee.methodName,arguments)};S[ac][X].methodName=X}else{if(Object.prototype.toString.call(C[aa])=="[object Array]"&&typeof C[aa][C[aa].length-1]=="function"&&(C[aa].length==C[aa][C[aa].length-1].length+2||C[aa].length==C[aa][C[aa].length-1].length+1)){var ad=C[aa].pop();if(C[aa].length==ad.length+1){var N=C[aa].splice(0,1)[0]}S[ac].staticMethods[X]=new Class.Method(X,ad,Q,true,N,C[aa]);var ad=S[ac].staticMethods[X];Q.parent=ad;ad.parentType=S[ac];ad.method.parentType=S[ac];S[ac][X]=function(){return b(S[ac],arguments.callee.methodName,arguments)};S[ac][X].methodName=X}else{S[ac].staticProperties[X]=new Class.Property(X,C[aa],Q);var W=S[ac].staticProperties[X];W.parentType=S[ac];Q.parent=S[ac].staticProperties[X]}}}}var v=k(S[ac]);for(var aa in v){if(!v.hasOwnProperty(aa)){continue}S[ac][v[aa]]=function(){return b(S[ac],arguments.callee.methodName,arguments)};S[ac][v[aa]].methodName=v[aa]}S[ac].get=function(af){var ag=this;var ah=ag.staticProperties[af];while(!ah&&ag.Extends){ag=ag.Extends;ah=ag.staticProperties[af]}if(!ah){throw new UnknownPropertyFatal(af)}S[ac].staticProperties[af].scope.checkCallingFunction(arguments.callee.caller);return S[ac].staticProperties[af].value};S[ac].set=function(af,ag){if(typeof S[ac].staticProperties[af]=="undefined"){throw new UnknownPropertyFatal(af)}S[ac].staticProperties[af].value=ag};if(!S[ac].Abstract&&S[ac].Extends){var D=S[ac].Extends;var M=[];var ab={};var G=false;while(D){for(var aa in D.AbstractMethods){if(!D.AbstractMethods.hasOwnProperty(aa)){continue}M.push(D.AbstractMethods[aa]);G=true}D=D.Extends||false}for(var aa in M){if(!M.hasOwnProperty(aa)){continue}var z=M[aa].split(":");if(typeof z[1]!="undefined"){var U=z[1].trim().split(" ")}else{var U=[]}z=z[0].trim().split(" ");if(z[0]=="protected"){var Q=Class.Scope.PROTECTED;z.shift()}else{if(z[0]=="public"){var Q=Class.Scope.PUBLIC;z.shift()}else{var Q=Class.Scope.PROTECTED}}if(z.length==2){U.unshift(z.shift())}var x=z.shift();ab[x]={scope:Q,implemented:false,types:U}}if(G){D=S[ac];while(D){for(var aa in D.methods){var A=false;if(!D.methods.hasOwnProperty(aa)){continue}if(typeof ab[aa]=="undefined"){continue}if(ab[aa].scope==D.methods[aa].scope.level){A=true}var H=ab[aa].types;if(H.length!=0){if(typeof D.methods[aa].argTypes=="undefined"){var y=0}else{var y=D.methods[aa].argTypes.length}if(H.length!=y&&H.length!=y+1){A=false}if(H.length==y){for(var Z in H){if(!H.hasOwnProperty(Z)){continue}if(D.methods[aa].argTypes[Z]!==H[Z]){A=false;break}}}if(H.length==y+1){if(D.methods[aa].returnType!=H[0]){A=false}for(var Z in H){if(Z==0){continue}if(!H.hasOwnProperty(Z)){continue}if(D.methods[aa].argTypes[parseInt(Z)-1]!==H[Z]){A=false;break}}}}if(A){ab[aa].implemented=true}}D=D.Extends||false}for(var aa in ab){if(!ab.hasOwnProperty(aa)){continue}if(ab[aa].implemented===false){throw new AbstractMethodNotImplementedFatal(aa)}}}}};Class.prototype.get=function(w){var y=u("property",w,this,this,arguments.callee.caller);if(typeof y.getter=="object"){if(y.parent.type==this.type){if(typeof y.getter["private"]!="undefined"){var v=y.getter["private"]}else{if(typeof y.getter["protected"]!="undefined"){var v=y.getter["protected"]}else{var v=y.getter["public"]}}}else{if(y.parent.type!=this.type){if(typeof y.getter["protected"]!="undefined"){var v=y.getter["protected"]}else{var v=y.getter["public"]}}else{var v=y.getter["public"]}}if(v[1]===false){throw new ScopeFatal("Cannot access restricted property")}var x=v[1](y.value);if(v[0]&&i(x,v[0])===false){throw new InvalidReturnTypeFatal()}return x}else{y.scope.checkCallingFunction(arguments.callee.caller)}return y.value};Class.prototype.set=function(v,x){var w=u("property",v,this,this,arguments.callee.caller);if(typeof w.setter=="object"){if(w.parent.type==this.type){if(typeof w.setter["private"]!="undefined"){var y=w.setter["private"]}else{if(typeof w.setter["protected"]!="undefined"){var y=w.setter["protected"]}else{var y=w.setter["public"]}}}else{if(w.parent.type!=this.type){if(typeof w.setter["protected"]!="undefined"){var y=w.setter["protected"]}else{var y=w.setter["public"]}}else{var y=w.setter["public"]}}if(y[1]===false){throw new ScopeFatal("Cannot access restricted property")}var x=y[1](x,w.value);if(y[0]&&i(x,y[0])===false){throw new InvalidArgumentTypeFatal()}w.value=x;this.propertyValues[v]=w.value}else{w.value=x;this.propertyValues[v]=w.value}};Class.prototype.call=function(D){var x=p(this);var F=false;try{var v=u("method",D,x,this,arguments.callee.caller)}catch(B){if(B instanceof UnknownMethodFatal){if(d("call",x)){var v=u("method","call",x,this,arguments.callee.caller);F=true}else{throw B}}else{throw B}}var w={};for(var E in v){if(v.hasOwnProperty(E)&&E!="prototype"){w[E]=v[E]}}w.method.parent=this;w.parentType.id=x.id;w.scope.checkCallingFunction(arguments.callee.caller.caller);var A=[];for(var C=1;C<arguments.length;C++){A.push(arguments[C])}if(typeof w.argTypes!="undefined"){for(var y in w.argTypes){if(!w.argTypes.hasOwnProperty(y)){continue}if(i(A[y],w.argTypes[y])===false){throw new InvalidArgumentTypeFatal()}}}if(c()){h(w.method,x,A,D);return}if(F===false){var z=w.method.apply(x,A)}else{var z=w.method.call(x,D,A)}if(typeof w.returnType=="undefined"){return z}if(i(z,w.returnType)===false){throw new InvalidReturnTypeFatal()}return z};Class.prototype.trigger=function(){var x=arguments.callee.caller;if(x.parent.type.methods.construct&&x==x.parent.type.methods.construct.method){throw new RuntimeFatal("Cannot trigger an event from a constructor")}var v=arguments[0];var A=p(this);while(A){if(typeof A.eventCallbacks!="undefined"&&typeof A.eventCallbacks[v]!="undefined"){var z=A.eventCallbacks;break}A=(A.parent)?A.parent:false}if(!z){throw new UnknownEventFatal(v)}var w=[];for(var y=1;y<arguments.length;y++){w.push(arguments[y])}for(var y in z[v]){if(!z[v].hasOwnProperty(y)){continue}var B=z[v][y];B.method.method.apply(B.object,w)}};Class.prototype.bind=function(z,B){var A=p(this);while(A){if(typeof A.eventCallbacks!="undefined"&&typeof A.eventCallbacks[z]!="undefined"){var C=A.eventCallbacks;break}A=(A.parent)?A.parent:false}if(!C){throw new UnknownEventFatal(z)}var x=p(this);var D=arguments.callee.caller.parent;var v=u("method",B,D,this,arguments.callee.caller);var w={};for(property in v){if(v.hasOwnProperty(property)&&property!="prototype"){w[property]=v[property]}}w.method.parent=this;w.parentType.id=D.id;w.scope.checkCallingObject(x);if(typeof w.argTypes!="undefined"){for(var y in A.type.Events[z].argTypes){if(!A.type.Events[z].argTypes.hasOwnProperty(y)){continue}if(w.argTypes[y]!==A.type.Events[z].argTypes[y]){throw new InvalidArgumentTypeFatal("Method argument types must match target event argument types")}}}for(var y in this.eventCallbacks[z]){if(!this.eventCallbacks[z].hasOwnProperty(y)){continue}if(this.eventCallbacks[z][y].method.name==B&&this.eventCallbacks[z][y].object==arguments.callee.caller.parent){return}}var C=C||this.eventCallbacks;C[z].push({object:D,method:v})};Class.prototype.unbind=function(v,z){var y=p(this);while(y){if(typeof y.eventCallbacks!="undefined"&&typeof y.eventCallbacks[v]!="undefined"){var x=y.eventCallbacks;break}y=(y.parent)?y.parent:false}if(!x){throw new UnknownEventFatal(v)}for(var w in x[v]){if(!x[v].hasOwnProperty(w)){continue}if(x[v][w].method.name==z&&x[v][w].object==arguments.callee.caller.parent){x[v].splice(w,1);return}}};var b=function(x,v,A){var B=x.staticMethods[v];while(!B&&x.Extends){x=x.Extends;B=x.staticMethods[v]}if(!B){throw new UnknownMethodFatal(v)}B.scope.checkCallingFunction(arguments.callee.caller.caller);var w=[];for(var y=0;y<A.length;y++){w.push(A[y])}if(B.argTypes){for(var y in B.argTypes){if(!B.argTypes.hasOwnProperty(y)){continue}if(i(w[y],B.argTypes[y])===false){throw new InvalidArgumentTypeFatal()}}}var z=B.method.apply(g,w);if(B.returnType&&i(z,B.returnType)===false){throw new InvalidReturnTypeFatal()}return z};Object.prototype.instanceOf=function(w){if(this.type===w){return true}if(this.type&&this.type.Implements){for(var v in this.type.Implements){if(!this.type.Implements.hasOwnProperty(v)){continue}if(w===this.type.Implements[v]){return true}}}if(this.parent){return this.parent.instanceOf(w)}return false};Class.prototype.clone=function(){return a(this)};Class.prototype.toString=function(){if(this.type&&this.type.methods&&typeof this.type.methods.toString=="object"){return this.call("toString")}if(this.parent){return this.parent.toString()}return"[object "+p(this).type.className+"]";return Object.prototype.toString.call(this)};function a(x){if(null==x||"object"!=typeof x){return x}if(x instanceof Date){var z=new Date();z.setTime(x.getTime());return z}if(x instanceof Array){var z=[];for(var y=0,w=x.length;y<w;y++){z[y]=a(x[y])}return z}if(typeof x.instanceOf=="function"&&x.instanceOf(Class)){var z=new x.type();z.propertyValues=a(x.propertyValues);return z}if(x instanceof Object){var z={};for(var v in x){if(x.hasOwnProperty(v)){z[v]=a(x[v])}}return z}throw new CloneFatal("Unable to copy object argument of type "+typeof x)}function p(v){if(v.child){return p(v.child)}return v}function u(y,x,w,v,z){if(arguments.callee.caller!=u){w=p(w)}if(w.parent==v&&z.caller.parentType&&z.caller.parentType.id==w.parent.id){w=v}if(y=="property"){if(w.properties&&w.properties[x]){var A=w.properties[x]}}else{if(w.type&&w.type.methods&&typeof w.type.methods[x]=="object"){var A=w.type.methods[x]}}if(A){A.value=w.propertyValues[x];return A}else{if(w.parent){var A=u(y,x,w.parent,v,z);if(typeof w.propertyValues[x]!="undefined"){A.value=w.propertyValues[x]}return A}else{if(y=="property"){throw new UnknownPropertyFatal(x)}else{throw new UnknownMethodFatal(x)}}}}function d(x,w){try{u("method",x,w)}catch(v){return false}return true}function m(w){var v=[];if(typeof w.type=="undefined"){return v}for(var x in w.type.methods){if(!w.type.methods.hasOwnProperty(x)){continue}v.push(x)}if(w.parent){var y=m(w.parent);for(var x in y){if(!y.hasOwnProperty(x)){continue}v.push(y[x])}}return v}function k(w){var v=[];if(w.Extends){var y=w.Extends;while(y){for(var x in y.staticMethods){if(!y.staticMethods.hasOwnProperty(x)){continue}v.push(x)}y=y.Extends||false}}return v}function i(x,z){if(Object.prototype.toString.call(x)=="[object Array]"){if(z.substr(0,1)=="["&&z.substr(z.length-1)=="]"){var v=z.substr(1,z.length-2);for(var w in x){if(!x.hasOwnProperty(w)){continue}if(i(x[w],v)===false){return false}}}}else{if(z==="null"){if(x!==null){return false}}else{if(z==="object"){if(typeof x!="object"){return false}}else{if(typeof x=="object"){if(x===null){return false}var y=z.split(".");var A=window;for(var w=0;w<y.length;w++){if(typeof A[y[w]]=="undefined"){break}A=A[y[w]]}var B=y.pop();if(typeof x.instanceOf!="undefined"&&x.instanceOf(A)){return true}return false}else{if(z!=typeof x){return false}}}}}}function q(x,w){if(x===w){return true}if(x==null||w==null){return false}if(x.length!=w.length){return false}for(var v=0;v<x.length;v++){if(x[v]!==w[v]){return false}}return true}function j(C){toProcessDependencies:for(var A in C){if(!C.hasOwnProperty(A)){continue}var y=C[A];for(var z in t){if(!t.hasOwnProperty(z)){continue}if(t[z]==y){continue toProcessDependencies}}var E=y.split(".").pop();var x=(y.split("/").pop()==y&&["js"].indexOf(E)==-1);var w=(x)?o:e;var v=g;for(var A in w){if(!w.hasOwnProperty(A)){continue}var B=w[A].pattern;if(y.substr(0,B.length)==B){var v=w[A].target+y.substr(B.length);break}}if(typeof v=="undefined"){v=y}if(x){v=v.split(".").join("/")+".js";E="js"}if(l.indexOf(v)>-1){continue}n(v);switch(E){case"js":var D=document.createElement("script");D.type="text/javascript";D.src=v;D.dependencyKey=y;D.onreadystatechange=D.onload=function(){Class.registerLoadedDependency(this.getAttribute("src"))};document.getElementsByTagName("head")[0].appendChild(D);l.push(v);break}}}var o=[];var e=[];Class.addClassAutoloadPattern=function(v,w){o.push({pattern:v,target:w});o.sort(function(y,x){return x.pattern.length-y.pattern.length})};Class.addFolderAutoloadPattern=function(v,w){e.push({pattern:v,target:w});e.sort(function(y,x){return x.pattern.length-y.pattern.length})};Class.require=function(v,y){var w=arguments.callee.caller.parent;if(Object.prototype.toString.call(v)!="[object Array]"){v=[v]}for(var x=0;x<v.length;x++){h(w.type.methods[y].method,w,[v[x]],y)}j(v)};var t=[];var r=[];var l=[];var f=[];function c(){return(r.length)}function n(v){r.push(v)}Class.registerLoadedDependency=function(v){var w=r.length;while(w--){if(r[w]==v){r.splice(w,1)}}if(r.length==0){for(var w in f){if(!f.hasOwnProperty(w)){continue}var x=f[w];delete f[w];x.callback.apply(x.object,x.args)}}};function h(y,x,w,v){f.push({callback:y,object:x,args:w,methodName:v})}Class.registerLoadedClass=function(v){if(Object.prototype.toString.apply(v)!="[object Array]"){v=[v]}for(var w in v){if(!v.hasOwnProperty(w)){continue}t.push(v[w])}}})();(function(a){Interface=function(){};Interface.define=function(b,c){var e={};for(var g in c){if(!c.hasOwnProperty(g)){continue}var h=c[g].split(":");if(h.length==2){var f=h.pop().trim().split(" ")}else{var f=null}h=h[0].trim().split(" ");if(h.length==2){var k=h.shift()}if(h.length>1){}e[h[0]]={argTypes:f,returnType:k}}var j=b.split(".");var l=j.pop();var d=window;for(var g in j){if(!j.hasOwnProperty(g)){continue}d[j[g]]=d[j[g]]||{};d=d[j[g]]}d[l]=function(){throw new CannotInstantiateInterfaceFatal()};d[l].methods=e}})();(function(a){Class.Scope=function(b){if(b!=Class.Scope.PUBLIC&&b!=Class.Scope.PROTECTED&&b!=Class.Scope.PRIVATE){throw new InvalidSyntaxFatal("Invalid scope declaration")}this.level=b};Class.Scope.PUBLIC=1;Class.Scope.PROTECTED=0;Class.Scope.PRIVATE=-1;Class.Scope.prototype.checkCallingObject=function(b){switch(this.level){case Class.Scope.PUBLIC:return true;break;case Class.Scope.PROTECTED:b=b||{};if(this.parent instanceof Class.Method){if(this.parent.isStatic){var c=b;while(c){if(c==this.parent.parentType){return true}c=c.Extends||false}throw new ScopeFatal("Cannot access protected method '"+this.parent.name+"'")}else{if(this.parent.parentType.id!=b.id){throw new ScopeFatal("Cannot access protected method '"+this.parent.name+"'")}}}else{if(this.parent.parentType){var c=b;while(c){if(this.parent.parentType==c){return true}c=c.Extends||false}throw new ScopeFatal("Cannot access protected property '"+this.parent.name+"'")}else{if(this.parent.parent.id!=b.id){throw new ScopeFatal("Cannot access protected property '"+this.parent.name+"'")}}}break;case Class.Scope.PRIVATE:if(this.parent instanceof Class.Method){if(this.parent.parentType!=b){throw new ScopeFatal("Cannot access private method '"+this.parent.name+"'")}}else{var d=(this.parent.parentType)?this.parent.parentType:this.parent.parent.type;if(d!=b){throw new ScopeFatal("Cannot access private property '"+this.parent.name+"'")}}}};Class.Scope.prototype.checkCallingFunction=function(b){return this.checkCallingObject(b.parentType)}})();(function(a){Class.Property=function(d,k,l,i,f,g,c,j,h,e,b){this.name=d;this.value=k;this.scope=l;this.getter=i;this.setter=f;this.ownerUsesGetter=g;this.childUsesGetter=c;this.ownerUsesSetter=j;this.childUsesSetter=h;this.getterType=e;this.setterType=b}})();(function(a){Class.Method=function(d,g,e,b,c,f){this.name=d;this.method=g;this.scope=e||new Class.Scope(Class.Scope.PUBLIC);this.isStatic=b||false;this.returnType=c;this.argTypes=f}})();