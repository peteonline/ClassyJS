if(!Object.create){Object.create=(function(){function a(){}return function(b){if(arguments.length!=1){throw new Error("Object.create implementation only accepts one parameter.")}a.prototype=b;return new a()}})()}String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(a,b){if(this===undefined||this===null){throw new TypeError('"this" is null or not defined')}var c=this.length>>>0;b=+b||0;if(Math.abs(b)===Infinity){b=0}if(b<0){b+=c;if(b<0){b=0}}for(;b<c;b++){if(this[b]===a){return b}}return -1}}(function(a){AbstractClassFatal=function(b){this.message=b;this.stack=Error().stack};AbstractClassFatal.prototype=Object.create(Error.prototype);AbstractClassFatal.prototype.name="Fatal: AbstractClass"})();(function(a){AbstractMethodNotImplementedFatal=function(b){this.message=b;this.stack=Error().stack};AbstractMethodNotImplementedFatal.prototype=Object.create(Error.prototype);AbstractMethodNotImplementedFatal.prototype.name="Fatal: AbstractMethodNotImplemented"})();(function(a){CannotInstantiateInterfaceFatal=function(b){this.message=b;this.stack=Error().stack};CannotInstantiateInterfaceFatal.prototype=Object.create(Error.prototype);CannotInstantiateInterfaceFatal.prototype.name="Fatal: CannotInstantiateInterface"})();(function(a){CloneFatal=function(b){this.message=b;this.stack=Error().stack};CloneFatal.prototype=Object.create(Error.prototype);CloneFatal.prototype.name="Fatal: Clone"})();(function(a){InterfaceIncorrectlyDefinedFatal=function(b){this.message=b;this.stack=Error().stack};InterfaceIncorrectlyDefinedFatal.prototype=Object.create(Error.prototype);InterfaceIncorrectlyDefinedFatal.prototype.name="Fatal: InterfaceIncorrectlyDefined"})();(function(a){InterfaceMethodNotImplementedFatal=function(b){this.message=b;this.stack=Error().stack};InterfaceMethodNotImplementedFatal.prototype=Object.create(Error.prototype);InterfaceMethodNotImplementedFatal.prototype.name="Fatal: InterfaceMethodNotImplemented"})();(function(a){InvalidArgumentTypeFatal=function(b){this.message=b;this.stack=Error().stack};InvalidArgumentTypeFatal.prototype=Object.create(Error.prototype);InvalidArgumentTypeFatal.prototype.name="Fatal: InvalidArgumentType"})();(function(a){InvalidClassDeclarationFatal=function(b){this.message=b;this.stack=Error().stack};InvalidClassDeclarationFatal.prototype=Object.create(Error.prototype);InvalidClassDeclarationFatal.prototype.name="Fatal: InvalidClassDeclaration"})();(function(a){InvalidReturnTypeFatal=function(b){this.message=b;this.stack=Error().stack};InvalidReturnTypeFatal.prototype=Object.create(Error.prototype);InvalidReturnTypeFatal.prototype.name="Fatal: InvalidReturnType"})();(function(a){InvalidSyntaxFatal=function(b){this.message=b;this.stack=Error().stack};InvalidSyntaxFatal.prototype=Object.create(Error.prototype);InvalidSyntaxFatal.prototype.name="Fatal: InvalidSyntax"})();(function(a){RuntimeFatal=function(b){this.message=b;this.stack=Error().stack};RuntimeFatal.prototype=Object.create(Error.prototype);RuntimeFatal.prototype.name="Fatal: Runtime"})();(function(a){ScopeFatal=function(b){this.message=b;this.stack=Error().stack};ScopeFatal.prototype=Object.create(Error.prototype);ScopeFatal.prototype.name="Fatal: Scope"})();(function(a){UnknownEventFatal=function(b){this.message=b;this.stack=Error().stack};UnknownEventFatal.prototype=Object.create(Error.prototype);UnknownEventFatal.prototype.name="Fatal: UnknownEvent"})();(function(a){UnknownMethodFatal=function(b){this.message=b;this.stack=Error().stack};UnknownMethodFatal.prototype=Object.create(Error.prototype);UnknownMethodFatal.prototype.name="Fatal: UnknownMethod"})();(function(a){UnknownPropertyFatal=function(b){this.message=b;this.stack=Error().stack};UnknownPropertyFatal.prototype=Object.create(Error.prototype);UnknownPropertyFatal.prototype.name="Fatal: UnknownProperty"})();(function(h){Class=function(){};var t=0;Class.define=function(ad,D){if(typeof ad!="string"||ad==""){throw new InvalidClassDeclarationFatal("Class name is required")}if(typeof D!="undefined"&&typeof D!="object"){throw new InvalidClassDeclarationFatal("Class definition must be object or undefined")}D=D||{};var C=ad.split(".");var z=C.pop();var O=window;for(var V in C){if(!C.hasOwnProperty(V)){continue}O[C[V]]=O[C[V]]||{};O=O[C[V]]}var S=[];for(var V in O[z]){if(O[z].hasOwnProperty(V)){S[V]=O[z][V]}}O[z]=function(){this.type=O[z];if(O[z].Implements){for(var ah in O[z].Implements){if(!O[z].Implements.hasOwnProperty(ah)){continue}var ag=O[z].Implements[ah];for(var ak in ag.methods){if(!ag.methods.hasOwnProperty(ak)){continue}var ai=ag.methods[ak];if(typeof this.type.methods[ak]=="undefined"){throw new InterfaceMethodNotImplementedFatal("Class '"+ad+"' must define interface method '"+ak+"'")}if(this.type.methods[ak].scope.level!=Class.Scope.PUBLIC){throw new InterfaceMethodNotImplementedFatal("Interface method '"+ak+"' must be declared public")}if(ai.argTypes!==null&&!r(ai.argTypes,this.type.methods[ak].argTypes)){throw new InvalidArgumentTypeFatal("Method '"+ak+"' must match argument types of interface")}if(ai.returnType!==h&&ai.returnType!=this.type.methods[ak].returnType){throw new InvalidReturnTypeFatal("Method '"+ak+"' must match return type of interface")}}}}this.properties=O[z].properties;this.propertyValues={};for(var ah in this.properties){if(!this.properties.hasOwnProperty(ah)){continue}this.properties[ah].parent=this;this.propertyValues[ah]=a(this.properties[ah].originalValue)}this.eventCallbacks={};for(var ah in this.type.Events){if(!this.type.Events.hasOwnProperty(ah)){continue}this.eventCallbacks[ah]=[]}if(this.type.Extends){this.parent=new this.type.Extends()}else{this.parent=new Class();this.parent.type=Class;this.parent.id=t++}this.parent.child=this;this.id=this.parent.id;var aj=n(this);for(var ah in aj){if(!aj.hasOwnProperty(ah)){continue}var ae=aj[ah];if(typeof this[ae]!="function"){this[ae]=function(){var al=[arguments.callee.methodName];for(var am=0;am<arguments.length;am++){al.push(arguments[am])}return this.call.apply(this,al)};this[ae].methodName=ae}}if(arguments.callee.caller!=O[z].toString()){if(O[z].Abstract){throw new AbstractClassFatal("Abstract class cannot be instantiated")}if(e("construct",this)&&arguments.callee.caller!==a){var af=["construct"];for(var ah=0;ah<arguments.length;ah++){af.push(arguments[ah])}this.call.apply(this,af)}}};O[z].className=ad;for(var V in S){if(!S.hasOwnProperty(V)){continue}O[z][V]=S[V]}O[z].prototype=Class.prototype;if(D.Require){if(Object.prototype.toString.apply(D.Require)!="[object Array]"){D.Require=[D.Require]}k(D.Require);delete D.Require}if(D.Abstract){if(Object.prototype.toString.apply(D.Abstract)=="[object Array]"){for(var V in D.Abstract){if(!D.Abstract.hasOwnProperty(V)){continue}var R=D.Abstract[V].split(" ");if(R[0]!="public"&&R[0]!="protected"){throw new InvalidSyntaxFatal("Abstract methods must be specified public or protected")}}O[z].AbstractMethods=D.Abstract}O[z].Abstract=true;delete D.Abstract}if(D.Extends){O[z].Extends=D.Extends;delete D.Extends}if(D.Implements){if(Object.prototype.toString.apply(D.Implements)!="[object Array]"){D.Implements=[D.Implements]}O[z].Implements=D.Implements;delete D.Implements}if(D.Events){if(Object.prototype.toString.apply(D.Events)!="[object Array]"){throw new InvalidSyntaxFatal("Events must be declared in an array")}var T={};for(var V in D.Events){if(!D.Events.hasOwnProperty(V)){continue}if(typeof D.Events[V]!="string"){throw new InvalidSyntaxFatal("Events must be declared as an array of strings")}var R=D.Events[V].split(":");if(R.length==2){var aa=R[1].trim().split(" ")}R=R[0].trim().split(" ");var Y=(R.length==2)?R.shift():h;T[R[0]]={argTypes:aa,returnType:Y}}O[z].Events=T;delete D.Events}O[z].properties={};O[z].methods={};O[z].staticProperties={};O[z].staticMethods={};var y=new RegExp("(?:(public|private|protected) )?([A-Za-z0-9-_]* )?(getter|setter)(?: :((?: [A-Za-z0-9-_][A-Za-z0-9-_.]*)*))?");for(var V in D){if(typeof D[V]!="object"){continue}var W={};for(var U in D[V]){if(!D[V].hasOwnProperty(U)){continue}var G=U.match(y);if(!G){continue}var Z=(G[3]=="getter")?2:4;var A=[G[Z]?G[Z].trim():h];if(typeof D[V][U]=="function"){A.push(D[V][U])}else{if(D[V][U]===true){A.push(function(ae){return ae})}else{if(D[V][U]===false){A.push(false)}}}if(typeof D[V][U]!="boolean"&&typeof D[V][U]!="function"&&typeof D[V][U]!="undefined"){throw new InvalidSyntaxFatal("Property getter should specify a function or boolean")}delete D[V][U];if(typeof W[V]=="undefined"){W[V]={}}if(typeof W[V]["getter"]=="undefined"){W[V]["getter"]={"public":[h,function(ae){return ae}],"private":h,"protected":h}}if(typeof W[V]["setter"]=="undefined"){W[V]["setter"]={"public":[h,function(ae){return ae}],"private":h,"protected":h}}W[V][G[3]][G[1]||"public"]=A}for(var U in W[V]){if(!W[V].hasOwnProperty(U)){continue}D[V][U]=W[V][U]}}toInspectDefinition:for(var V in D){if(!D.hasOwnProperty(V)){continue}var x;var K=false;var R=V.split(":").shift().trim().split(" ");if(V.split(":").length==2){var ac=V.split(":").pop().trim().split(" ")}var Q=R.pop();if(R[0]=="static"){K=true;R.shift()}if(typeof D[V]=="object"){for(var U in D[V]){if(!D[V].hasOwnProperty(U)){continue}if(U!="getter"&&U!="setter"&&U!="value"){break}if(typeof D[V].getter=="undefined"&&typeof D[V].setter=="undefined"){break}if(V.substring(0,8)=="private:"||V.substring(0,10)=="protected:"||V.substring(0,7)=="public:"){throw new InvalidSyntaxFatal("Cannot declare access level on properties")}if(Object.prototype.toString.apply(D[V].getter)!="[object Array]"){D[V].getter=[h,D[V].getter,true,true]}else{if(D[V].getter.length==1){D[V].getter=[h,D[V].getter[0],true,true]}else{if(D[V].getter.length==2){var ab=D[V].getter[0];if(typeof ab=="boolean"||typeof ab=="function"){D[V].getter=[h,D[V].getter[0],D[V].getter[1],D[V].getter[1]]}else{D[V].getter=[D[V].getter[0],D[V].getter[1],true,true]}}else{if(D[V].getter.length==3){var ab=D[V].getter[0];if(typeof ab=="boolean"||typeof ab=="function"){D[V].getter=[h,D[V].getter[0],D[V].getter[1],D[V].getter[2]]}else{D[V].getter=[D[V].getter[0],D[V].getter[1],D[V].getter[2],D[V].getter[2]]}}}}}if(Object.prototype.toString.apply(D[V].setter)!="[object Array]"){D[V].setter=[h,D[V].setter,true,true]}else{if(D[V].setter.length==1){D[V].setter=[h,D[V].setter[0],true,true]}else{if(D[V].setter.length==2){var ab=D[V].setter[0];if(typeof ab=="boolean"||typeof ab=="function"){D[V].setter=[h,D[V].setter[0],D[V].setter[1],D[V].setter[1]]}else{D[V].setter=[D[V].setter[0],D[V].setter[1],true,true]}}else{if(D[V].setter.length==3){var ab=D[V].setter[0];if(typeof ab=="boolean"||typeof ab=="function"){D[V].setter=[h,D[V].setter[0],D[V].setter[1],D[V].setter[2]]}else{D[V].setter=[D[V].setter[0],D[V].setter[1],D[V].setter[2],D[V].setter[2]]}}}}}x=new Class.Scope(Class.Scope.PRIVATE);O[z].properties[Q]=new Class.Property(Q,D[V].value,x,(typeof D[V].getter[1]=="undefined"||D[V].getter[1]===true)?function(ae){return ae}:D[V].getter[1],(typeof D[V].setter[1]=="undefined"||D[V].setter[1]===true)?function(ae){return ae}:D[V].setter[1],D[V].getter[2],D[V].getter[3],D[V].setter[2],D[V].setter[3],D[V].getter[0],D[V].setter[0]);x.parent=O[z].properties[Q];O[z].properties[Q].originalValue=D[V].value;continue toInspectDefinition}}if(R[0]=="private"){x=new Class.Scope(Class.Scope.PRIVATE);R.shift()}else{if(R[0]=="protected"){x=new Class.Scope(Class.Scope.PROTECTED);R.shift()}else{if(R[0]=="public"){x=new Class.Scope(Class.Scope.PUBLIC);R.shift()}else{x=new Class.Scope(Class.Scope.PRIVATE)}}}if(!K){if(typeof D[V]=="function"){O[z].methods[Q]=new Class.Method(Q,D[V],x,null,(R.length==0)?h:R[0],ac);x.parent=O[z].methods[Q];O[z].methods[Q].parentType=O[z];O[z].methods[Q].method.parentType=O[z]}else{O[z].properties[Q]=new Class.Property(Q,D[V],x);x.parent=O[z].properties[Q];O[z].properties[Q].originalValue=D[V]}}else{if(typeof D[V]=="function"){O[z].staticMethods[Q]=new Class.Method(Q,D[V],x,true,(R.length==0)?h:R[0],ac);var B=O[z].staticMethods[Q];x.parent=B;B.parentType=O[z];B.method.parentType=O[z];O[z][Q]=function(){return b(O[z],arguments.callee.methodName,arguments)};O[z][Q].methodName=Q}else{if(Object.prototype.toString.call(D[V])=="[object Array]"&&typeof D[V][D[V].length-1]=="function"&&(D[V].length==D[V][D[V].length-1].length+2||D[V].length==D[V][D[V].length-1].length+1)){var B=D[V].pop();if(D[V].length==B.length+1){var Y=D[V].splice(0,1)[0]}O[z].staticMethods[Q]=new Class.Method(Q,B,x,true,Y,D[V]);var B=O[z].staticMethods[Q];x.parent=B;B.parentType=O[z];B.method.parentType=O[z];O[z][Q]=function(){return b(O[z],arguments.callee.methodName,arguments)};O[z][Q].methodName=Q}else{O[z].staticProperties[Q]=new Class.Property(Q,D[V],x);var F=O[z].staticProperties[Q];F.parentType=O[z];x.parent=O[z].staticProperties[Q]}}}}var w=l(O[z]);for(var V in w){if(!w.hasOwnProperty(V)){continue}O[z][w[V]]=function(){return b(O[z],arguments.callee.methodName,arguments)};O[z][w[V]].methodName=w[V]}O[z].get=function(ae){var af=this;var ag=af.staticProperties[ae];while(!ag&&af.Extends){af=af.Extends;ag=af.staticProperties[ae]}if(!ag){throw new UnknownPropertyFatal(ae)}O[z].staticProperties[ae].scope.checkCallingFunction(arguments.callee.caller);return O[z].staticProperties[ae].value};O[z].set=function(ae,af){if(typeof O[z].staticProperties[ae]=="undefined"){throw new UnknownPropertyFatal(ae)}O[z].staticProperties[ae].value=af};if(!O[z].Abstract&&O[z].Extends){var J=O[z].Extends;var X=[];var I={};var P=false;while(J){for(var V in J.AbstractMethods){if(!J.AbstractMethods.hasOwnProperty(V)){continue}X.push(J.AbstractMethods[V]);P=true}J=J.Extends||false}for(var V in X){if(!X.hasOwnProperty(V)){continue}var R=X[V].split(":");if(typeof R[1]!="undefined"){var N=R[1].trim().split(" ")}else{var N=[]}R=R[0].trim().split(" ");if(R[0]=="protected"){var x=Class.Scope.PROTECTED;R.shift()}else{if(R[0]=="public"){var x=Class.Scope.PUBLIC;R.shift()}else{var x=Class.Scope.PROTECTED}}if(R.length==2){N.unshift(R.shift())}var M=R.shift();I[M]={scope:x,implemented:false,types:N}}if(P){J=O[z];while(J){for(var V in J.methods){var L=false;if(!J.methods.hasOwnProperty(V)){continue}if(typeof I[V]=="undefined"){continue}if(I[V].scope==J.methods[V].scope.level){L=true}var E=I[V].types;if(E.length!=0){if(typeof J.methods[V].argTypes=="undefined"){var H=0}else{var H=J.methods[V].argTypes.length}if(E.length!=H&&E.length!=H+1){L=false}if(E.length==H){for(var U in E){if(!E.hasOwnProperty(U)){continue}if(J.methods[V].argTypes[U]!==E[U]){L=false;break}}}if(E.length==H+1){if(J.methods[V].returnType!=E[0]){L=false}for(var U in E){if(U==0){continue}if(!E.hasOwnProperty(U)){continue}if(J.methods[V].argTypes[parseInt(U)-1]!==E[U]){L=false;break}}}}if(L){I[V].implemented=true}}J=J.Extends||false}for(var V in I){if(!I.hasOwnProperty(V)){continue}if(I[V].implemented===false){throw new AbstractMethodNotImplementedFatal(V)}}}}};Class.prototype.get=function(x){var z=v("property",x,this,this,arguments.callee.caller);if(typeof z.getter=="object"){if(z.parent.type==this.type){if(typeof z.getter["private"]!="undefined"){var w=z.getter["private"]}else{if(typeof z.getter["protected"]!="undefined"){var w=z.getter["protected"]}else{var w=z.getter["public"]}}}else{if(z.parent.type!=this.type){if(typeof z.getter["protected"]!="undefined"){var w=z.getter["protected"]}else{var w=z.getter["public"]}}else{var w=z.getter["public"]}}if(w[1]===false){throw new ScopeFatal("Cannot access restricted property")}var y=w[1](z.value);if(w[0]&&j(y,w[0])===false){throw new InvalidReturnTypeFatal()}return y}else{z.scope.checkCallingFunction(arguments.callee.caller)}return z.value};Class.prototype.set=function(w,y){var x=v("property",w,this,this,arguments.callee.caller);if(typeof x.setter=="object"){if(x.parent.type==this.type){if(typeof x.setter["private"]!="undefined"){var z=x.setter["private"]}else{if(typeof x.setter["protected"]!="undefined"){var z=x.setter["protected"]}else{var z=x.setter["public"]}}}else{if(x.parent.type!=this.type){if(typeof x.setter["protected"]!="undefined"){var z=x.setter["protected"]}else{var z=x.setter["public"]}}else{var z=x.setter["public"]}}if(z[1]===false){throw new ScopeFatal("Cannot access restricted property")}var y=z[1](y,x.value);if(z[0]&&j(y,z[0])===false){throw new InvalidArgumentTypeFatal()}x.value=y;this.propertyValues[w]=x.value}else{x.value=y;this.propertyValues[w]=x.value}};Class.prototype.call=function(E){var y=q(this);var G=false;try{var w=v("method",E,y,this,arguments.callee.caller)}catch(C){if(C instanceof UnknownMethodFatal){if(e("call",y)){var w=v("method","call",y,this,arguments.callee.caller);G=true}else{throw C}}else{throw C}}var x={};for(var F in w){if(w.hasOwnProperty(F)&&F!="prototype"){x[F]=w[F]}}x.method.parent=this;x.parentType.id=y.id;x.scope.checkCallingFunction(arguments.callee.caller.caller);var B=[];for(var D=1;D<arguments.length;D++){B.push(arguments[D])}if(typeof x.argTypes!="undefined"){for(var z in x.argTypes){if(!x.argTypes.hasOwnProperty(z)){continue}if(j(B[z],x.argTypes[z])===false){throw new InvalidArgumentTypeFatal()}}}if(d()){i(x.method,y,B,E);return}if(G===false){var A=x.method.apply(y,B)}else{var A=x.method.call(y,E,B)}if(typeof x.returnType=="undefined"){return A}if(j(A,x.returnType)===false){throw new InvalidReturnTypeFatal()}return A};Class.prototype.trigger=function(){var y=arguments.callee.caller;if(y.parent.type.methods.construct&&y==y.parent.type.methods.construct.method){throw new RuntimeFatal("Cannot trigger an event from a constructor")}var w=arguments[0];var B=q(this);while(B){if(typeof B.eventCallbacks!="undefined"&&typeof B.eventCallbacks[w]!="undefined"){var A=B.eventCallbacks;break}B=(B.parent)?B.parent:false}if(!A){throw new UnknownEventFatal(w)}var x=[];for(var z=1;z<arguments.length;z++){x.push(arguments[z])}for(var z in A[w]){if(!A[w].hasOwnProperty(z)){continue}var C=A[w][z];C.method.method.apply(C.object,x)}};Class.prototype.bind=function(A,C){var B=q(this);while(B){if(typeof B.eventCallbacks!="undefined"&&typeof B.eventCallbacks[A]!="undefined"){var D=B.eventCallbacks;break}B=(B.parent)?B.parent:false}if(!D){throw new UnknownEventFatal(A)}var y=q(this);var E=arguments.callee.caller.parent;var w=v("method",C,E,this,arguments.callee.caller);var x={};for(property in w){if(w.hasOwnProperty(property)&&property!="prototype"){x[property]=w[property]}}x.method.parent=this;x.parentType.id=E.id;x.scope.checkCallingObject(y);if(typeof x.argTypes!="undefined"){for(var z in B.type.Events[A].argTypes){if(!B.type.Events[A].argTypes.hasOwnProperty(z)){continue}if(x.argTypes[z]!==B.type.Events[A].argTypes[z]){throw new InvalidArgumentTypeFatal("Method argument types must match target event argument types")}}}for(var z in this.eventCallbacks[A]){if(!this.eventCallbacks[A].hasOwnProperty(z)){continue}if(this.eventCallbacks[A][z].method.name==C&&this.eventCallbacks[A][z].object==arguments.callee.caller.parent){return}}var D=D||this.eventCallbacks;D[A].push({object:E,method:w})};Class.prototype.unbind=function(w,A){var z=q(this);while(z){if(typeof z.eventCallbacks!="undefined"&&typeof z.eventCallbacks[w]!="undefined"){var y=z.eventCallbacks;break}z=(z.parent)?z.parent:false}if(!y){throw new UnknownEventFatal(w)}for(var x in y[w]){if(!y[w].hasOwnProperty(x)){continue}if(y[w][x].method.name==A&&y[w][x].object==arguments.callee.caller.parent){y[w].splice(x,1);return}}};var b=function(y,w,B){var C=y.staticMethods[w];while(!C&&y.Extends){y=y.Extends;C=y.staticMethods[w]}if(!C){throw new UnknownMethodFatal(w)}C.scope.checkCallingFunction(arguments.callee.caller.caller);var x=[];for(var z=0;z<B.length;z++){x.push(B[z])}if(C.argTypes){for(var z in C.argTypes){if(!C.argTypes.hasOwnProperty(z)){continue}if(j(x[z],C.argTypes[z])===false){throw new InvalidArgumentTypeFatal()}}}var A=C.method.apply(h,x);if(C.returnType&&j(A,C.returnType)===false){throw new InvalidReturnTypeFatal()}return A};Object.prototype.instanceOf=function(x){if(this.type===x){return true}if(this.type&&this.type.Implements){for(var w in this.type.Implements){if(!this.type.Implements.hasOwnProperty(w)){continue}if(x===this.type.Implements[w]){return true}}}if(this.parent){return this.parent.instanceOf(x)}return false};Class.prototype.clone=function(){return a(this)};Class.prototype.toString=function(){if(this.type&&this.type.methods&&typeof this.type.methods.toString=="object"){return this.call("toString")}if(this.parent){return this.parent.toString()}return"[object "+q(this).type.className+"]";return Object.prototype.toString.call(this)};function a(y){if(null==y||"object"!=typeof y){return y}if(y instanceof Date){var A=new Date();A.setTime(y.getTime());return A}if(y instanceof Array){var A=[];for(var z=0,x=y.length;z<x;z++){A[z]=a(y[z])}return A}if(typeof y.instanceOf=="function"&&y.instanceOf(Class)){var A=new y.type();A.propertyValues=a(y.propertyValues);return A}if(y instanceof Object){var A={};for(var w in y){if(y.hasOwnProperty(w)){A[w]=a(y[w])}}return A}throw new CloneFatal("Unable to copy object argument of type "+typeof y)}function q(w){if(w.child){return q(w.child)}return w}function v(z,y,x,w,A){if(arguments.callee.caller!=v){x=q(x)}if(x.parent==w&&A.caller.parentType&&A.caller.parentType.id==x.parent.id){x=w}if(z=="property"){if(x.properties&&x.properties[y]){var B=x.properties[y]}}else{if(x.type&&x.type.methods&&typeof x.type.methods[y]=="object"){var B=x.type.methods[y]}}if(B){B.value=x.propertyValues[y];return B}else{if(x.parent){var B=v(z,y,x.parent,w,A);if(typeof x.propertyValues[y]!="undefined"){B.value=x.propertyValues[y]}return B}else{if(z=="property"){throw new UnknownPropertyFatal(y)}else{throw new UnknownMethodFatal(y)}}}}function e(y,x){try{v("method",y,x)}catch(w){return false}return true}function n(x){var w=[];if(typeof x.type=="undefined"){return w}for(var y in x.type.methods){if(!x.type.methods.hasOwnProperty(y)){continue}w.push(y)}if(x.parent){var z=n(x.parent);for(var y in z){if(!z.hasOwnProperty(y)){continue}w.push(z[y])}}return w}function l(x){var w=[];if(x.Extends){var z=x.Extends;while(z){for(var y in z.staticMethods){if(!z.staticMethods.hasOwnProperty(y)){continue}w.push(y)}z=z.Extends||false}}return w}function j(y,A){if(Object.prototype.toString.call(y)=="[object Array]"){if(A.substr(0,1)=="["&&A.substr(A.length-1)=="]"){var w=A.substr(1,A.length-2);for(var x in y){if(!y.hasOwnProperty(x)){continue}if(j(y[x],w)===false){return false}}}}else{if(A==="null"){if(y!==null){return false}}else{if(A==="object"){if(typeof y!="object"){return false}}else{if(typeof y=="object"){if(y===null){return false}var z=A.split(".");var B=window;for(var x=0;x<z.length;x++){if(typeof B[z[x]]=="undefined"){break}B=B[z[x]]}var C=z.pop();if(typeof y.instanceOf!="undefined"&&y.instanceOf(B)){return true}return false}else{if(A!=typeof y){return false}}}}}}function r(y,x){if(y===x){return true}if(y==null||x==null){return false}if(y.length!=x.length){return false}for(var w=0;w<y.length;w++){if(y[w]!==x[w]){return false}}return true}function k(D){toProcessDependencies:for(var B in D){if(!D.hasOwnProperty(B)){continue}var z=D[B];for(var A in u){if(!u.hasOwnProperty(A)){continue}if(u[A]==z){continue toProcessDependencies}}var F=z.split(".").pop();var y=(z.split("/").pop()==z&&["js"].indexOf(F)==-1);var x=(y)?p:f;var w=h;for(var B in x){if(!x.hasOwnProperty(B)){continue}var C=x[B].pattern;if(z.substr(0,C.length)==C){var w=x[B].target+z.substr(C.length);break}}if(typeof w=="undefined"){w=z}if(y){w=w.split(".").join("/")+".js";F="js"}if(m.indexOf(w)>-1){continue}o(w);switch(F){case"js":var E=document.createElement("script");E.type="text/javascript";E.src=w;E.onreadystatechange=E.onload=function(){c(w)};document.getElementsByTagName("head")[0].appendChild(E);m.push(w);break}}}var p=[];var f=[];Class.addClassAutoloadPattern=function(w,x){p.push({pattern:w,target:x});p.sort(function(z,y){return y.pattern.length-z.pattern.length})};Class.addFolderAutoloadPattern=function(w,x){f.push({pattern:w,target:x});f.sort(function(z,y){return y.pattern.length-z.pattern.length})};var u=[];var s=[];var m=[];var g=[];function d(){return(s.length)}function o(w){s.push(w)}function c(w){var x=s.length;while(x--){if(s[x]==w){s.splice(x,1)}}if(s.length==0){for(var x in g){if(!g.hasOwnProperty(x)){continue}var y=g[x];if(y.methodName){y.callback.call(y.object,y.methodName,y.args)}else{y.callback.apply(y.object,y.args)}}}}function i(z,y,x,w){g.push({callback:z,object:y,args:x,methodName:w})}Class.registerLoadedClass=function(w){if(Object.prototype.toString.apply(w)!="[object Array]"){w=[w]}for(var x in w){if(!w.hasOwnProperty(x)){continue}u.push(w[x])}}})();(function(a){Interface=function(){};Interface.define=function(b,c){var e={};for(var g in c){if(!c.hasOwnProperty(g)){continue}var h=c[g].split(":");if(h.length==2){var f=h.pop().trim().split(" ")}else{var f=null}h=h[0].trim().split(" ");if(h.length==2){var k=h.shift()}if(h.length>1){}e[h[0]]={argTypes:f,returnType:k}}var j=b.split(".");var l=j.pop();var d=window;for(var g in j){if(!j.hasOwnProperty(g)){continue}d[j[g]]=d[j[g]]||{};d=d[j[g]]}d[l]=function(){throw new CannotInstantiateInterfaceFatal()};d[l].methods=e}})();(function(a){Class.Method=function(d,g,e,b,c,f){this.name=d;this.method=g;this.scope=e||new Class.Scope(Class.Scope.PUBLIC);this.isStatic=b||false;this.returnType=c;this.argTypes=f}})();(function(a){Class.Property=function(d,k,l,i,f,g,c,j,h,e,b){this.name=d;this.value=k;this.scope=l;this.getter=i;this.setter=f;this.ownerUsesGetter=g;this.childUsesGetter=c;this.ownerUsesSetter=j;this.childUsesSetter=h;this.getterType=e;this.setterType=b}})();(function(a){Class.Scope=function(b){if(b!=Class.Scope.PUBLIC&&b!=Class.Scope.PROTECTED&&b!=Class.Scope.PRIVATE){throw new InvalidSyntaxFatal("Invalid scope declaration")}this.level=b};Class.Scope.PUBLIC=1;Class.Scope.PROTECTED=0;Class.Scope.PRIVATE=-1;Class.Scope.prototype.checkCallingObject=function(b){switch(this.level){case Class.Scope.PUBLIC:return true;break;case Class.Scope.PROTECTED:b=b||{};if(this.parent instanceof Class.Method){if(this.parent.isStatic){var c=b;while(c){if(c==this.parent.parentType){return true}c=c.Extends||false}throw new ScopeFatal("Cannot access protected method '"+this.parent.name+"'")}else{if(this.parent.parentType.id!=b.id){throw new ScopeFatal("Cannot access protected method '"+this.parent.name+"'")}}}else{if(this.parent.parentType){var c=b;while(c){if(this.parent.parentType==c){return true}c=c.Extends||false}throw new ScopeFatal("Cannot access protected property '"+this.parent.name+"'")}else{if(this.parent.parent.id!=b.id){throw new ScopeFatal("Cannot access protected property '"+this.parent.name+"'")}}}break;case Class.Scope.PRIVATE:if(this.parent instanceof Class.Method){if(this.parent.parentType!=b){throw new ScopeFatal("Cannot access private method '"+this.parent.name+"'")}}else{var d=(this.parent.parentType)?this.parent.parentType:this.parent.parent.type;if(d!=b){throw new ScopeFatal("Cannot access private property '"+this.parent.name+"'")}}}};Class.Scope.prototype.checkCallingFunction=function(b){return this.checkCallingObject(b.parentType)}})();