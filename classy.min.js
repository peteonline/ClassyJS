if(!Object.create){Object.create=(function(){function a(){}return function(b){if(arguments.length!=1){throw new Error("Object.create implementation only accepts one parameter.")}a.prototype=b;return new a()}})()}String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(a,b){if(this===undefined||this===null){throw new TypeError('"this" is null or not defined')}var c=this.length>>>0;b=+b||0;if(Math.abs(b)===Infinity){b=0}if(b<0){b+=c;if(b<0){b=0}}for(;b<c;b++){if(this[b]===a){return b}}return -1}}(function(a){InvalidSyntaxFatal=function(b){this.message=b;this.stack=Error().stack};InvalidSyntaxFatal.prototype=Object.create(Error.prototype);InvalidSyntaxFatal.prototype.name="Fatal: InvalidSyntax"})();(function(a){AbstractClassFatal=function(b){this.message=b;this.stack=Error().stack};AbstractClassFatal.prototype=Object.create(Error.prototype);AbstractClassFatal.prototype.name="Fatal: AbstractClass"})();(function(a){AbstractMethodNotImplementedFatal=function(b){this.message=b;this.stack=Error().stack};AbstractMethodNotImplementedFatal.prototype=Object.create(Error.prototype);AbstractMethodNotImplementedFatal.prototype.name="Fatal: AbstractMethodNotImplemented"})();(function(a){InvalidClassDeclarationFatal=function(b){this.message=b;this.stack=Error().stack};InvalidClassDeclarationFatal.prototype=Object.create(Error.prototype);InvalidClassDeclarationFatal.prototype.name="Fatal: InvalidClassDeclaration"})();(function(a){RuntimeFatal=function(b){this.message=b;this.stack=Error().stack};RuntimeFatal.prototype=Object.create(Error.prototype);RuntimeFatal.prototype.name="Fatal: Runtime"})();(function(a){ScopeFatal=function(b){this.message=b;this.stack=Error().stack};ScopeFatal.prototype=Object.create(Error.prototype);ScopeFatal.prototype.name="Fatal: Scope"})();(function(a){UnknownPropertyFatal=function(b){this.message=b;this.stack=Error().stack};UnknownPropertyFatal.prototype=Object.create(Error.prototype);UnknownPropertyFatal.prototype.name="Fatal: UnknownProperty"})();(function(a){UnknownMethodFatal=function(b){this.message=b;this.stack=Error().stack};UnknownMethodFatal.prototype=Object.create(Error.prototype);UnknownMethodFatal.prototype.name="Fatal: UnknownMethod"})();(function(a){UnknownEventFatal=function(b){this.message=b;this.stack=Error().stack};UnknownEventFatal.prototype=Object.create(Error.prototype);UnknownEventFatal.prototype.name="Fatal: UnknownEvent"})();(function(a){CannotInstantiateInterfaceFatal=function(b){this.message=b;this.stack=Error().stack};CannotInstantiateInterfaceFatal.prototype=Object.create(Error.prototype);CannotInstantiateInterfaceFatal.prototype.name="Fatal: CannotInstantiateInterface"})();(function(a){InterfaceMethodNotImplementedFatal=function(b){this.message=b;this.stack=Error().stack};InterfaceMethodNotImplementedFatal.prototype=Object.create(Error.prototype);InterfaceMethodNotImplementedFatal.prototype.name="Fatal: InterfaceMethodNotImplemented"})();(function(a){InterfaceIncorrectlyDefinedFatal=function(b){this.message=b;this.stack=Error().stack};InterfaceIncorrectlyDefinedFatal.prototype=Object.create(Error.prototype);InterfaceIncorrectlyDefinedFatal.prototype.name="Fatal: InterfaceIncorrectlyDefined"})();(function(a){InvalidReturnTypeFatal=function(b){this.message=b;this.stack=Error().stack};InvalidReturnTypeFatal.prototype=Object.create(Error.prototype);InvalidReturnTypeFatal.prototype.name="Fatal: InvalidReturnType"})();(function(a){InvalidArgumentTypeFatal=function(b){this.message=b;this.stack=Error().stack};InvalidArgumentTypeFatal.prototype=Object.create(Error.prototype);InvalidArgumentTypeFatal.prototype.name="Fatal: InvalidArgumentType"})();(function(a){CloneFatal=function(b){this.message=b;this.stack=Error().stack};CloneFatal.prototype=Object.create(Error.prototype);CloneFatal.prototype.name="Fatal: Clone"})();(function(g){Class=function(){};var s=0;Class.define=function(ad,C){if(typeof ad!="string"||ad==""){throw new InvalidClassDeclarationFatal("Class name is required")}if(typeof C!="undefined"&&typeof C!="object"){throw new InvalidClassDeclarationFatal("Class definition must be object or undefined")}C=C||{};var B=ad.split(".");var z=B.pop();var N=window;for(var V in B){if(!B.hasOwnProperty(V)){continue}N[B[V]]=N[B[V]]||{};N=N[B[V]]}var S=[];for(var V in N[z]){if(N[z].hasOwnProperty(V)){S[V]=N[z][V]}}N[z]=function(){this.type=N[z];if(N[z].Implements){for(var ak in N[z].Implements){if(!N[z].Implements.hasOwnProperty(ak)){continue}var an=N[z].Implements[ak];if(typeof an=="string"){var ag=an.split(".");var ah=window;for(var aj=0;aj<ag.length;aj++){ah=ah[ag[aj]]}an=ah}for(var ae in an.methods){if(!an.methods.hasOwnProperty(ae)){continue}var ai=an.methods[ae];if(typeof this.type.methods[ae]=="undefined"){throw new InterfaceMethodNotImplementedFatal("Class '"+ad+"' must define interface method '"+ae+"'")}if(this.type.methods[ae].scope.level!=Class.Scope.PUBLIC){throw new InterfaceMethodNotImplementedFatal("Interface method '"+ae+"' must be declared public")}if(ai.argTypes!==null&&!q(ai.argTypes,this.type.methods[ae].argTypes)){throw new InvalidArgumentTypeFatal("Method '"+ae+"' must match argument types of interface")}if(ai.returnType!==g&&ai.returnType!=this.type.methods[ae].returnType){throw new InvalidReturnTypeFatal("Method '"+ae+"' must match return type of interface")}}}}this.properties=N[z].properties;this.propertyValues={};for(var ak in this.properties){if(!this.properties.hasOwnProperty(ak)){continue}this.properties[ak].parent=this;this.propertyValues[ak]=a(this.properties[ak].originalValue)}this.eventCallbacks={};for(var ak in this.type.Events){if(!this.type.Events.hasOwnProperty(ak)){continue}this.eventCallbacks[ak]=[]}if(this.type.Extends){this.parent=new this.type.Extends()}else{this.parent=new Class();this.parent.type=Class;this.parent.id=s++}this.parent.child=this;this.id=this.parent.id;var af=m(this);for(var ak in af){if(!af.hasOwnProperty(ak)){continue}var am=af[ak];if(typeof this[am]!="function"){this[am]=function(){var ao=[arguments.callee.methodName];for(var ap=0;ap<arguments.length;ap++){ao.push(arguments[ap])}return this.call.apply(this,ao)};this[am].methodName=am}}if(arguments.callee.caller!=N[z].toString()){if(N[z].Abstract){throw new AbstractClassFatal("Abstract class cannot be instantiated")}if(d("construct",this)&&arguments.callee.caller!==a){var al=["construct"];for(var ak=0;ak<arguments.length;ak++){al.push(arguments[ak])}this.call.apply(this,al)}}};N[z].className=ad;for(var V in S){if(!S.hasOwnProperty(V)){continue}N[z][V]=S[V]}N[z].prototype=Class.prototype;if(C.Require){if(Object.prototype.toString.apply(C.Require)!="[object Array]"){C.Require=[C.Require]}j(C.Require,Class.registerLoadedDependency);delete C.Require}if(C.Abstract){if(Object.prototype.toString.apply(C.Abstract)=="[object Array]"){for(var V in C.Abstract){if(!C.Abstract.hasOwnProperty(V)){continue}var R=C.Abstract[V].split(" ");if(R[0]!="public"&&R[0]!="protected"){throw new InvalidSyntaxFatal("Abstract methods must be specified public or protected")}}N[z].AbstractMethods=C.Abstract}N[z].Abstract=true;delete C.Abstract}if(C.Extends){N[z].Extends=C.Extends;delete C.Extends}if(C.Implements){if(Object.prototype.toString.apply(C.Implements)!="[object Array]"){C.Implements=[C.Implements]}N[z].Implements=C.Implements;delete C.Implements}if(!C.Events){C.Events=[]}if(C.Events){if(Object.prototype.toString.apply(C.Events)!="[object Array]"){throw new InvalidSyntaxFatal("Events must be declared in an array")}var T={};var Q=false;for(var V in C.Events){if(!C.Events.hasOwnProperty(V)){continue}if(typeof C.Events[V]!="string"){throw new InvalidSyntaxFatal("Events must be declared as an array of strings")}var R=C.Events[V].split(":");if(R.length==2){var aa=R[1].trim().split(" ")}R=R[0].trim().split(" ");var Y=(R.length==2)?R.shift():g;if(R[0]=="change"){Q=true}T[R[0]]={argTypes:aa,returnType:Y}}if(!Q){T.change={argTypes:["string","object"],returnType:g}}N[z].Events=T;delete C.Events}N[z].properties={};N[z].methods={};N[z].staticProperties={};N[z].staticMethods={};var x=new RegExp("(?:(public|private|protected) )?([A-Za-z0-9-_]* )?(getter|setter)(?: :((?: [A-Za-z0-9-_][A-Za-z0-9-_.]*)*))?");for(var V in C){if(typeof C[V]!="object"){continue}var W={};for(var U in C[V]){if(!C[V].hasOwnProperty(U)){continue}var F=U.match(x);if(!F){continue}var Z=(F[3]=="getter")?2:4;var y=[F[Z]?F[Z].trim():g];if(typeof C[V][U]=="function"){y.push(C[V][U])}else{if(C[V][U]===true){y.push(function(ae){return ae})}else{if(C[V][U]===false){y.push(false)}}}if(typeof C[V][U]!="boolean"&&typeof C[V][U]!="function"&&typeof C[V][U]!="undefined"){throw new InvalidSyntaxFatal("Property getter should specify a function or boolean")}delete C[V][U];if(typeof W[V]=="undefined"){W[V]={}}if(typeof W[V]["getter"]=="undefined"){W[V]["getter"]={"public":[g,function(ae){return ae}],"private":g,"protected":g}}if(typeof W[V]["setter"]=="undefined"){W[V]["setter"]={"public":[g,function(ae){return ae}],"private":g,"protected":g}}W[V][F[3]][F[1]||"public"]=y}for(var U in W[V]){if(!W[V].hasOwnProperty(U)){continue}C[V][U]=W[V][U]}}toInspectDefinition:for(var V in C){if(!C.hasOwnProperty(V)){continue}var w;var J=false;var R=V.split(":").shift().trim().split(" ");if(V.split(":").length==2){var ac=V.split(":").pop().trim().split(" ")}var P=R.pop();if(R[0]=="static"){J=true;R.shift()}if(typeof C[V]=="object"){for(var U in C[V]){if(!C[V].hasOwnProperty(U)){continue}if(U!="getter"&&U!="setter"&&U!="value"){break}if(typeof C[V].getter=="undefined"&&typeof C[V].setter=="undefined"){break}if(V.substring(0,8)=="private:"||V.substring(0,10)=="protected:"||V.substring(0,7)=="public:"){throw new InvalidSyntaxFatal("Cannot declare access level on properties")}if(Object.prototype.toString.apply(C[V].getter)!="[object Array]"){C[V].getter=[g,C[V].getter,true,true]}else{if(C[V].getter.length==1){C[V].getter=[g,C[V].getter[0],true,true]}else{if(C[V].getter.length==2){var ab=C[V].getter[0];if(typeof ab=="boolean"||typeof ab=="function"){C[V].getter=[g,C[V].getter[0],C[V].getter[1],C[V].getter[1]]}else{C[V].getter=[C[V].getter[0],C[V].getter[1],true,true]}}else{if(C[V].getter.length==3){var ab=C[V].getter[0];if(typeof ab=="boolean"||typeof ab=="function"){C[V].getter=[g,C[V].getter[0],C[V].getter[1],C[V].getter[2]]}else{C[V].getter=[C[V].getter[0],C[V].getter[1],C[V].getter[2],C[V].getter[2]]}}}}}if(Object.prototype.toString.apply(C[V].setter)!="[object Array]"){C[V].setter=[g,C[V].setter,true,true]}else{if(C[V].setter.length==1){C[V].setter=[g,C[V].setter[0],true,true]}else{if(C[V].setter.length==2){var ab=C[V].setter[0];if(typeof ab=="boolean"||typeof ab=="function"){C[V].setter=[g,C[V].setter[0],C[V].setter[1],C[V].setter[1]]}else{C[V].setter=[C[V].setter[0],C[V].setter[1],true,true]}}else{if(C[V].setter.length==3){var ab=C[V].setter[0];if(typeof ab=="boolean"||typeof ab=="function"){C[V].setter=[g,C[V].setter[0],C[V].setter[1],C[V].setter[2]]}else{C[V].setter=[C[V].setter[0],C[V].setter[1],C[V].setter[2],C[V].setter[2]]}}}}}w=new Class.Scope(Class.Scope.PRIVATE);N[z].properties[P]=new Class.Property(P,C[V].value,w,(typeof C[V].getter[1]=="undefined"||C[V].getter[1]===true)?function(ae){return ae}:C[V].getter[1],(typeof C[V].setter[1]=="undefined"||C[V].setter[1]===true)?function(ae){return ae}:C[V].setter[1],C[V].getter[2],C[V].getter[3],C[V].setter[2],C[V].setter[3],C[V].getter[0],C[V].setter[0]);w.parent=N[z].properties[P];N[z].properties[P].originalValue=C[V].value;continue toInspectDefinition}}if(R[0]=="private"){w=new Class.Scope(Class.Scope.PRIVATE);R.shift()}else{if(R[0]=="protected"){w=new Class.Scope(Class.Scope.PROTECTED);R.shift()}else{if(R[0]=="public"){w=new Class.Scope(Class.Scope.PUBLIC);R.shift()}else{w=new Class.Scope(Class.Scope.PRIVATE)}}}if(!J){if(typeof C[V]=="function"){N[z].methods[P]=new Class.Method(P,C[V],w,null,(R.length==0)?g:R[0],ac);w.parent=N[z].methods[P];N[z].methods[P].parentType=N[z];N[z].methods[P].method.parentType=N[z]}else{N[z].properties[P]=new Class.Property(P,C[V],w);w.parent=N[z].properties[P];N[z].properties[P].originalValue=C[V]}}else{if(typeof C[V]=="function"){N[z].staticMethods[P]=new Class.Method(P,C[V],w,true,(R.length==0)?g:R[0],ac);var A=N[z].staticMethods[P];w.parent=A;A.parentType=N[z];A.method.parentType=N[z];N[z][P]=function(){return b(N[z],arguments.callee.methodName,arguments)};N[z][P].methodName=P}else{if(Object.prototype.toString.call(C[V])=="[object Array]"&&typeof C[V][C[V].length-1]=="function"&&(C[V].length==C[V][C[V].length-1].length+2||C[V].length==C[V][C[V].length-1].length+1)){var A=C[V].pop();if(C[V].length==A.length+1){var Y=C[V].splice(0,1)[0]}N[z].staticMethods[P]=new Class.Method(P,A,w,true,Y,C[V]);var A=N[z].staticMethods[P];w.parent=A;A.parentType=N[z];A.method.parentType=N[z];N[z][P]=function(){return b(N[z],arguments.callee.methodName,arguments)};N[z][P].methodName=P}else{N[z].staticProperties[P]=new Class.Property(P,C[V],w);var E=N[z].staticProperties[P];E.parentType=N[z];w.parent=N[z].staticProperties[P]}}}}var v=k(N[z]);for(var V in v){if(!v.hasOwnProperty(V)){continue}N[z][v[V]]=function(){return b(N[z],arguments.callee.methodName,arguments)};N[z][v[V]].methodName=v[V]}N[z].get=function(ae){var af=this;var ag=af.staticProperties[ae];while(!ag&&af.Extends){af=af.Extends;ag=af.staticProperties[ae]}if(!ag){throw new UnknownPropertyFatal(ae)}N[z].staticProperties[ae].scope.checkCallingFunction(arguments.callee.caller);return N[z].staticProperties[ae].value};N[z].set=function(ae,af){if(typeof N[z].staticProperties[ae]=="undefined"){throw new UnknownPropertyFatal(ae)}N[z].staticProperties[ae].value=af};if(!N[z].Abstract&&N[z].Extends){var I=N[z].Extends;var X=[];var H={};var O=false;while(I){for(var V in I.AbstractMethods){if(!I.AbstractMethods.hasOwnProperty(V)){continue}X.push(I.AbstractMethods[V]);O=true}I=I.Extends||false}for(var V in X){if(!X.hasOwnProperty(V)){continue}var R=X[V].split(":");if(typeof R[1]!="undefined"){var M=R[1].trim().split(" ")}else{var M=[]}R=R[0].trim().split(" ");if(R[0]=="protected"){var w=Class.Scope.PROTECTED;R.shift()}else{if(R[0]=="public"){var w=Class.Scope.PUBLIC;R.shift()}else{var w=Class.Scope.PROTECTED}}if(R.length==2){M.unshift(R.shift())}var L=R.shift();H[L]={scope:w,implemented:false,types:M}}if(O){I=N[z];while(I){for(var V in I.methods){var K=false;if(!I.methods.hasOwnProperty(V)){continue}if(typeof H[V]=="undefined"){continue}if(H[V].scope==I.methods[V].scope.level){K=true}var D=H[V].types;if(D.length!=0){if(typeof I.methods[V].argTypes=="undefined"){var G=0}else{var G=I.methods[V].argTypes.length}if(D.length!=G&&D.length!=G+1){K=false}if(D.length==G){for(var U in D){if(!D.hasOwnProperty(U)){continue}if(I.methods[V].argTypes[U]!==D[U]){K=false;break}}}if(D.length==G+1){if(I.methods[V].returnType!=D[0]){K=false}for(var U in D){if(U==0){continue}if(!D.hasOwnProperty(U)){continue}if(I.methods[V].argTypes[parseInt(U)-1]!==D[U]){K=false;break}}}}if(K){H[V].implemented=true}}I=I.Extends||false}for(var V in H){if(!H.hasOwnProperty(V)){continue}if(H[V].implemented===false){throw new AbstractMethodNotImplementedFatal(V)}}}}};Class.prototype.get=function(w){var y=u("property",w,this,this,arguments.callee.caller);if(typeof y.getter=="object"){if(y.parent.type==this.type){if(typeof y.getter["private"]!="undefined"){var v=y.getter["private"]}else{if(typeof y.getter["protected"]!="undefined"){var v=y.getter["protected"]}else{var v=y.getter["public"]}}}else{if(y.parent.type!=this.type){if(typeof y.getter["protected"]!="undefined"){var v=y.getter["protected"]}else{var v=y.getter["public"]}}else{var v=y.getter["public"]}}if(v[1]===false){throw new ScopeFatal("Cannot access restricted property")}var x=v[1](y.value);if(v[0]&&i(x,v[0])===false){throw new InvalidReturnTypeFatal()}return x}else{y.scope.checkCallingFunction(arguments.callee.caller)}return y.value};Class.prototype.set=function(w,z){var y=u("property",w,this,this,arguments.callee.caller);if(typeof y.setter=="object"){if(y.parent.type==this.type){if(typeof y.setter["private"]!="undefined"){var B=y.setter["private"]}else{if(typeof y.setter["protected"]!="undefined"){var B=y.setter["protected"]}else{var B=y.setter["public"]}}}else{if(y.parent.type!=this.type){if(typeof y.setter["protected"]!="undefined"){var B=y.setter["protected"]}else{var B=y.setter["public"]}}else{var B=y.setter["public"]}}if(B[1]===false){throw new ScopeFatal("Cannot access restricted property")}var z=B[1](z,y.value);if(B[0]&&i(z,B[0])===false){throw new InvalidArgumentTypeFatal()}y.value=z;this.propertyValues[w]=y.value}else{y.value=z;this.propertyValues[w]=y.value}if(z.instanceOf(Class)){var x=this;var v=[];var A=function(E,C){for(var D=0;D<b.length;D++){if(v[D]===C){v.push(C);return}}v.push(C);x.trigger("change",w,x)};A.id="set-change-callback";z.bind("change",A)}this.trigger("change",w,this)};Class.prototype.call=function(D){var x=p(this);var F=false;try{var v=u("method",D,x,this,arguments.callee.caller)}catch(B){if(B instanceof UnknownMethodFatal){if(d("call",x)){var v=u("method","call",x,this,arguments.callee.caller);F=true}else{throw B}}else{throw B}}var w={};for(var E in v){if(v.hasOwnProperty(E)&&E!="prototype"){w[E]=v[E]}}w.method.parent=this;w.parentType.id=x.id;w.scope.checkCallingFunction(arguments.callee.caller.caller);var A=[];for(var C=1;C<arguments.length;C++){A.push(arguments[C])}if(typeof w.argTypes!="undefined"){for(var y in w.argTypes){if(!w.argTypes.hasOwnProperty(y)){continue}if(i(A[y],w.argTypes[y])===false){throw new InvalidArgumentTypeFatal()}}}if(c()){h(w.method,x,A,D);return}if(F===false){var z=w.method.apply(x,A)}else{var z=w.method.call(x,D,A)}if(typeof w.returnType=="undefined"){return z}if(i(z,w.returnType)===false){throw new InvalidReturnTypeFatal()}return z};Class.prototype.trigger=function(){var x=arguments.callee.caller;if(x!==Class.prototype.set&&x.id!="set-change-callback"&&x.parent.type.methods.construct&&x==x.parent.type.methods.construct.method){throw new RuntimeFatal("Cannot trigger an event from a constructor")}var v=arguments[0];var A=p(this);while(A){if(typeof A.eventCallbacks!="undefined"&&typeof A.eventCallbacks[v]!="undefined"){var z=A.eventCallbacks;break}A=(A.parent)?A.parent:false}if(!z){throw new UnknownEventFatal(v)}var w=[];for(var y=1;y<arguments.length;y++){w.push(arguments[y])}for(var y in z[v]){if(!z[v].hasOwnProperty(y)){continue}var B=z[v][y];B.method.method.apply(B.object,w)}};Class.prototype.bind=function(z,B){var A=p(this);while(A){if(typeof A.eventCallbacks!="undefined"&&typeof A.eventCallbacks[z]!="undefined"){var C=A.eventCallbacks;break}A=(A.parent)?A.parent:false}if(!C){throw new UnknownEventFatal(z)}var x=p(this);if(arguments.callee.caller===Class.prototype.set){C.change.push({object:x,method:{method:B}});return}var D=arguments.callee.caller.parent;var v=u("method",B,D,this,arguments.callee.caller);var w={};for(property in v){if(v.hasOwnProperty(property)&&property!="prototype"){w[property]=v[property]}}w.method.parent=this;w.parentType.id=D.id;w.scope.checkCallingObject(x);if(typeof w.argTypes!="undefined"){for(var y in A.type.Events[z].argTypes){if(!A.type.Events[z].argTypes.hasOwnProperty(y)){continue}if(w.argTypes[y]!==A.type.Events[z].argTypes[y]){throw new InvalidArgumentTypeFatal("Method argument types must match target event argument types")}}}for(var y in this.eventCallbacks[z]){if(!this.eventCallbacks[z].hasOwnProperty(y)){continue}if(this.eventCallbacks[z][y].method.name==B&&this.eventCallbacks[z][y].object==arguments.callee.caller.parent){return}}var C=C||this.eventCallbacks;C[z].push({object:D,method:v})};Class.prototype.unbind=function(v,z){var y=p(this);while(y){if(typeof y.eventCallbacks!="undefined"&&typeof y.eventCallbacks[v]!="undefined"){var x=y.eventCallbacks;break}y=(y.parent)?y.parent:false}if(!x){throw new UnknownEventFatal(v)}for(var w in x[v]){if(!x[v].hasOwnProperty(w)){continue}if(x[v][w].method.name==z&&x[v][w].object==arguments.callee.caller.parent){x[v].splice(w,1);return}}};var b=function(x,v,A){var B=x.staticMethods[v];while(!B&&x.Extends){x=x.Extends;B=x.staticMethods[v]}if(!B){throw new UnknownMethodFatal(v)}B.scope.checkCallingFunction(arguments.callee.caller.caller);var w=[];for(var y=0;y<A.length;y++){w.push(A[y])}if(B.argTypes){for(var y in B.argTypes){if(!B.argTypes.hasOwnProperty(y)){continue}if(i(w[y],B.argTypes[y])===false){throw new InvalidArgumentTypeFatal()}}}var z=B.method.apply(g,w);if(B.returnType&&i(z,B.returnType)===false){throw new InvalidReturnTypeFatal()}return z};Object.prototype.instanceOf=function(w){if(this.type===w){return true}if(this.type&&this.type.Implements){for(var v in this.type.Implements){if(!this.type.Implements.hasOwnProperty(v)){continue}if(w===this.type.Implements[v]){return true}}}if(this.parent){return this.parent.instanceOf(w)}return false};Class.prototype.clone=function(){return a(this)};Class.prototype.toString=function(){if(this.type&&this.type.methods&&typeof this.type.methods.toString=="object"){return this.call("toString")}if(this.parent){return this.parent.toString()}return"[object "+p(this).type.className+"]";return Object.prototype.toString.call(this)};function a(x){if(null==x||"object"!=typeof x){return x}if(x instanceof Date){var z=new Date();z.setTime(x.getTime());return z}if(x instanceof Array){var z=[];for(var y=0,w=x.length;y<w;y++){z[y]=a(x[y])}return z}if(typeof x.instanceOf=="function"&&x.instanceOf(Class)){var z=new x.type();z.propertyValues=a(x.propertyValues);return z}if(x instanceof Object){var z={};for(var v in x){if(x.hasOwnProperty(v)){z[v]=a(x[v])}}return z}throw new CloneFatal("Unable to copy object argument of type "+typeof x)}function p(v){if(v.child){return p(v.child)}return v}function u(y,x,w,v,z){if(arguments.callee.caller!=u){w=p(w)}if(w.parent==v&&z.caller.parentType&&z.caller.parentType.id==w.parent.id){w=v}if(y=="property"){if(w.properties&&w.properties[x]){var A=w.properties[x]}}else{if(w.type&&w.type.methods&&typeof w.type.methods[x]=="object"){var A=w.type.methods[x]}}if(A){A.value=w.propertyValues[x];return A}else{if(w.parent){var A=u(y,x,w.parent,v,z);if(typeof w.propertyValues[x]!="undefined"){A.value=w.propertyValues[x]}return A}else{if(y=="property"){throw new UnknownPropertyFatal(x)}else{throw new UnknownMethodFatal(x)}}}}function d(x,w){try{u("method",x,w)}catch(v){return false}return true}function m(w){var v=[];if(typeof w.type=="undefined"){return v}for(var x in w.type.methods){if(!w.type.methods.hasOwnProperty(x)){continue}v.push(x)}if(w.parent){var y=m(w.parent);for(var x in y){if(!y.hasOwnProperty(x)){continue}v.push(y[x])}}return v}function k(w){var v=[];if(w.Extends){var y=w.Extends;while(y){for(var x in y.staticMethods){if(!y.staticMethods.hasOwnProperty(x)){continue}v.push(x)}y=y.Extends||false}}return v}function i(x,z){if(Object.prototype.toString.call(x)=="[object Array]"){if(z.substr(0,1)=="["&&z.substr(z.length-1)=="]"){var v=z.substr(1,z.length-2);for(var w in x){if(!x.hasOwnProperty(w)){continue}if(i(x[w],v)===false){return false}}}}else{if(z==="null"){if(x!==null){return false}}else{if(z==="object"){if(typeof x!="object"){return false}}else{if(typeof x=="object"){if(x===null){return false}var y=z.split(".");var A=window;for(var w=0;w<y.length;w++){if(typeof A[y[w]]=="undefined"){break}A=A[y[w]]}var B=y.pop();if(typeof x.instanceOf!="undefined"&&x.instanceOf(A)){return true}return false}else{if(z!=typeof x){return false}}}}}}function q(x,w){if(x===w){return true}if(x==null||w==null){return false}if(x.length!=w.length){return false}for(var v=0;v<x.length;v++){if(x[v]!==w[v]){return false}}return true}function j(C){toProcessDependencies:for(var A in C){if(!C.hasOwnProperty(A)){continue}var y=C[A];for(var z in t){if(!t.hasOwnProperty(z)){continue}if(t[z]==y){continue toProcessDependencies}}var E=y.split(".").pop();var x=(y.split("/").pop()==y&&["js"].indexOf(E)==-1);var w=(x)?o:e;var v=g;for(var A in w){if(!w.hasOwnProperty(A)){continue}var B=w[A].pattern;if(y.substr(0,B.length)==B){var v=w[A].target+y.substr(B.length);break}}if(typeof v=="undefined"){v=y}if(x){v=v.split(".").join("/")+".js";E="js"}if(l.indexOf(v)>-1){Class.registerLoadedDependency(v);continue}n(v);switch(E){case"js":var D=document.createElement("script");D.type="text/javascript";D.src=v;D.dependencyKey=y;D.onreadystatechange=D.onload=function(){Class.registerLoadedDependency(this.getAttribute("src"))};document.getElementsByTagName("head")[0].appendChild(D);l.push(v);break}}}var o=[];var e=[];Class.addClassAutoloadPattern=function(v,w){o.push({pattern:v,target:w});o.sort(function(y,x){return x.pattern.length-y.pattern.length})};Class.addFolderAutoloadPattern=function(v,w){e.push({pattern:v,target:w});e.sort(function(y,x){return x.pattern.length-y.pattern.length})};Class.require=function(v,y){var w=arguments.callee.caller.parent;if(Object.prototype.toString.call(v)!="[object Array]"){v=[v]}for(var x=0;x<v.length;x++){h(w.type.methods[y].method,w,[v[x]],y)}j(v)};var t=[];var r=[];var l=[];var f=[];function c(){return(r.length)}function n(v){r.push(v)}Class.registerLoadedDependency=function(v){var w=r.length;while(w--){if(r[w]==v){r.splice(w,1)}}if(r.length==0){for(var w in f){if(!f.hasOwnProperty(w)){continue}var x=f[w];delete f[w];x.callback.apply(x.object,x.args)}}};function h(y,x,w,v){f.push({callback:y,object:x,args:w,methodName:v})}Class.registerLoadedClass=function(v){if(Object.prototype.toString.apply(v)!="[object Array]"){v=[v]}for(var w in v){if(!v.hasOwnProperty(w)){continue}t.push(v[w])}}})();(function(a){Interface=function(){};Interface.define=function(b,c){var e={};for(var g in c){if(!c.hasOwnProperty(g)){continue}var h=c[g].split(":");if(h.length==2){var f=h.pop().trim().split(" ")}else{var f=null}h=h[0].trim().split(" ");if(h.length==2){var k=h.shift()}if(h.length>1){}e[h[0]]={argTypes:f,returnType:k}}var j=b.split(".");var l=j.pop();var d=window;for(var g in j){if(!j.hasOwnProperty(g)){continue}d[j[g]]=d[j[g]]||{};d=d[j[g]]}d[l]=function(){throw new CannotInstantiateInterfaceFatal()};d[l].methods=e}})();(function(a){Class.Scope=function(b){if(b!=Class.Scope.PUBLIC&&b!=Class.Scope.PROTECTED&&b!=Class.Scope.PRIVATE){throw new InvalidSyntaxFatal("Invalid scope declaration")}this.level=b};Class.Scope.PUBLIC=1;Class.Scope.PROTECTED=0;Class.Scope.PRIVATE=-1;Class.Scope.prototype.checkCallingObject=function(b){switch(this.level){case Class.Scope.PUBLIC:return true;break;case Class.Scope.PROTECTED:b=b||{};if(this.parent instanceof Class.Method){if(this.parent.isStatic){var c=b;while(c){if(c==this.parent.parentType){return true}c=c.Extends||false}throw new ScopeFatal("Cannot access protected method '"+this.parent.name+"'")}else{if(this.parent.parentType.id!=b.id){throw new ScopeFatal("Cannot access protected method '"+this.parent.name+"'")}}}else{if(this.parent.parentType){var c=b;while(c){if(this.parent.parentType==c){return true}c=c.Extends||false}throw new ScopeFatal("Cannot access protected property '"+this.parent.name+"'")}else{if(this.parent.parent.id!=b.id){throw new ScopeFatal("Cannot access protected property '"+this.parent.name+"'")}}}break;case Class.Scope.PRIVATE:if(this.parent instanceof Class.Method){if(this.parent.parentType!=b){throw new ScopeFatal("Cannot access private method '"+this.parent.name+"'")}}else{var d=(this.parent.parentType)?this.parent.parentType:this.parent.parent.type;if(d!=b){throw new ScopeFatal("Cannot access private property '"+this.parent.name+"'")}}}};Class.Scope.prototype.checkCallingFunction=function(b){return this.checkCallingObject(b.parentType)}})();(function(a){Class.Property=function(d,k,l,i,f,g,c,j,h,e,b){this.name=d;this.value=k;this.scope=l;this.getter=i;this.setter=f;this.ownerUsesGetter=g;this.childUsesGetter=c;this.ownerUsesSetter=j;this.childUsesSetter=h;this.getterType=e;this.setterType=b}})();(function(a){Class.Method=function(d,g,e,b,c,f){this.name=d;this.method=g;this.scope=e||new Class.Scope(Class.Scope.PUBLIC);this.isStatic=b||false;this.returnType=c;this.argTypes=f}})();